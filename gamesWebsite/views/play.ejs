<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style type="text/css">
      body {
        font-family: cursive;
      }
      body {
        font-family: cursive;
        padding-left: 2%;
        padding-right: 2%;
        background-color: rgb(106, 3, 127);
      }
      .main-header {
        width: 100%;
        height: 4rem;
        background: linear-gradient(45deg, #f93281, #f64c03, #f7fe22);
        display: grid;
        grid-template-columns: 60% 40%;
        grid-template-areas: "logo navigation";
        align-items: center;
      }
      .main-header__logo {
        display: inline-flex;
        height: 4rem;

        text-align: center;
      }

      .logo {
        margin: 1.2rem;
      }

      .current-category {
        font-size: 1.2rem;
        font-family: inherit;
      }

      .main-header__nav {
        grid-area: navigation;
        font-size: 1.3rem;
        height: 100%;
        width: 100%;
        display: grid;
        grid-template-columns: 20% 20% 60%;
        grid-template-areas: "categories shuffle search-game";
      }


      .categories-btn {
        width: 100%;
        height: 100%;
        background-color: inherit;
        grid-area: categories;
        text-align: center;
        border: none;
        font-size: inherit;
        font-family: inherit;
      }

      .categories-btn:hover {
        color: rgb(0, 252, 248);
        cursor: pointer;
      }

      .categories-dropdown {
        position: relative;
        display: inline-block;
      }

      .categories-content {
        max-height: 400px;
        overflow: auto;
        display: none;
        position: absolute;
        background-color: rgb(0, 252, 248);
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
      }

      .categorize-btn {
        height: 100%;
        width: 100%;
        color: black;
        border: none;
        background-color: inherit;
        padding: 12px 16px;
        text-decoration: none;
        font-family: inherit;
      }

      .categorize-btn:hover {
        background-color: rgb(0, 252, 248);
        cursor: pointer;
        display: block;
      }

      .categories-dropdown:hover .categories-content {
        display: block;
      }

      .categories-dropdown:hover .categories-btn {
        cursor: pointer;
      }

      .shuffle {
        grid-area: shuffle;
      }

  
      .shuffle-form {
        margin-top: 1rem;
      }


      .shuffle-btn {
        border: none;
        background-color: inherit;
        width: 100%;
        height: 100%;
        font-family: inherit;
        font-size: inherit;
      }

      .shuffle-btn:hover {
        cursor: pointer;
        color: rgb(0, 252, 248);
      }

      .search-game {
        grid-area: search-game;
        text-align: center;
        padding-top: 1rem;
      }

      .search {
        height: 1.5rem;
        width: 80%;
        padding: 0.25rem;
        background-color: rgb(0, 252, 248);
        border: none;
        border-radius: 0.5rem;
        font-family: inherit;
        font-size: inherit;
      }

      .search:hover {
        border: none;
        background-color: rgb(0, 252, 248);
      }

      .search:focus {
        outline: none;
        background-color: rgb(0, 252, 248);
      }

      .search-btn {
        height: 2rem;
        width: auto;
        background-color: inherit;
        border: none;
        border-radius: 0.5rem;
        font-family: inherit;
        font-size: inherit;
        cursor: pointer;
      }

      .search-btn:hover {
        border: none;
        color: rgb(0, 252, 248);
      }


      .container {
        margin-top: 2rem;
        margin-left: 5%;
        display: grid;
        grid-template-areas:
          "frame frame side-bar"
          "frame frame side-bar"
          "desc desc side-bar"
          "pic pic side-bar";
        grid-template-columns: 30% 30% 30%;
        grid-template-rows: 350px 350px 300px 300px;
        gap: 20px;
      }

      .frame {
        grid-area: frame;
        padding: 50px;
        background: rgb(131, 2, 157);
      }

      iframe {
        width: 100%;
        height: 100%;
      }

      .side-bar {
        grid-area: side-bar;
        background: rgb(131, 2, 157);
        display: block;
        overflow-y: auto;
        padding: 20px;
        text-align: center;
      }

      .description {
        grid-area: desc;
        padding: 40px;
        text-align: center;
        background: rgb(131, 2, 157);
      }

      .instructions-title{
        font-size: 2rem;
        font-family: inherit;
        color: rgb(0, 252, 248);
      }

      .pictures {
        grid-area: pic;
        background: rgb(131, 2, 157);
      }

      /* Slideshow container */
.slideshow-container {
  max-width: 842.167px;
  position: relative;
  margin: auto;
  display: flex;
}

.mySlides {
  margin:auto;
}


/* Next & previous buttons */
.prev, .next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  padding: 16px;
  margin-top: -22px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
}

/* Position the "next button" to the right */
.next {
  right: 0;
  border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
  background-color: rgba(0,0,0,0.8);
}


/* The dots/bullets/indicators */
.dot {
  cursor: pointer;
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.6s ease;
}

.active, .dot:hover {
  background-color: #717171;
}

/* Fading animation */
.fade {
  animation-name: fade;
  animation-duration: 1.5s;
}

@keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}




.mySlides img{
  height: 250px;
  max-height: 250px;
  width: auto;
  
}

/* For similar games */
.game-item {
        border-radius: 30px;
        height: 250px;
        padding: 10px;
        display: block;
        text-align: center;
        background: linear-gradient(45deg, #f93281, #f64c03, #f7fe22);
        margin: 30px;
      }

      .game-item:hover {
        background: rgb(0, 252, 248);
      }

      .game-image {
        width: 90%;
        height: 200px;

        text-align: center;
        margin: auto auto;
      }

      .game-image img {
        width: 100%;
        height: 100%;

        object-fit: scale-down;
      }

      .game-open {
        width: 100%;
        height: 100%;
      }

      .game-open-button {
        width: 100%;
        height: 100%;
        background-color: inherit;
        border: none;
        font-size: inherit;
        font-family: inherit;
      }

      .game-open-button:hover {
        cursor: pointer;
      }

      .similar-games {
        font-family: inherit;
        font-size: 2rem;
        color: rgb(0, 252, 248);
      }
    </style>
    <title><%= game.Title %></title>
  </head>
  <body>
    <header class="main-header">
   
      <div class="main-header__logo">
        <div class="logo">
          <i class="fa-solid fa-gamepad fa-2xl"></i>
        </div>
        <p class="current-category">Games</p>
      </div>

      <nav class="main-header__nav">
        <div class="categories-dropdown">
          <button class="categories-btn">Categories</button>
          <div class="categories-content">
            <% for(category of categories){ %>
            <form class="categorize" action="/games/<%= category %>">
              <button class="categorize-btn"><%= category %></button>
            </form>
            <% } %>
          </div>
        </div>

        <div class="shuffle">
          <% let randomGame = games[Math.floor(Math.random() * games.length)] %>
          <form
            class="shuffle-form"
            action="/game/<%= randomGame.Title %>"
            method="GET"
          >
            <button class="shuffle-btn" type="submit">Shuffle</button>
          </form>
        </div>

        <div class="search-game">
          <form
            class="search-game-form"
            action="/games/All?search=true"
            method="POST"
          >
            <input
              name="search"
              class="search"
              type="text"
              placeholder="  Search Games  "
            />
            <button class="search-btn" type="submit">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </form>
        </div>
      </nav>
    </header>

    <main>
      <div class="container">
        <div class="frame">
          <iframe src="<%= game.Url %>"></iframe>
        </div>

        <div class="side-bar">
          <p class="similar-games">You may also like:</p>
          <% for (oneGame of similarGames){ %>
            <article class="game-item">
              <form class="game-open" action="/game/<%=oneGame.Title %>" method="GET">
                <button class="game-open-button" type="submit">
                  <div class="game-image">
                    <img src="<%= oneGame.Asset[0] %>" />
                  </div>
                  <div class="game-title"><%= oneGame.Title %></div>
                </button>
              </form>
            </article>
          <% } %>

        </div>
        <div class="description">
          <p class="instructions-title">How to Play?</p>
          <p><%= game.Instructions %></p>
          
        </div>
        <div class="pictures">
          <div class="slideshow-container">
          <% for(pic of game.Asset) { %>
          
            <div class="mySlides fade">
              <img src="<%= pic %>" />
              <div class="text"></div>
            </div>
          <% } %>

          <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
          <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br />

        <!-- The dots/circles -->
        <div style="text-align: center">
          <span class="dot" onclick="currentSlide(1)"></span>
          <span class="dot" onclick="currentSlide(2)"></span>
          <span class="dot" onclick="currentSlide(3)"></span>
        </div>
      </div>
      </div>
    </main>
  </body>
</html>

</script>
<script>
  let slideIndex = 1;
  showSlides(slideIndex);
  
  function plusSlides(n) {
    showSlides(slideIndex += n);
  }
  
  function currentSlide(n) {
    showSlides(slideIndex = n);
  }
  
  function showSlides(n) {
    let i;
    let slides = document.getElementsByClassName("mySlides");
    let dots = document.getElementsByClassName("dot");
    if (n > slides.length) {slideIndex = 1}    
    if (n < 1) {slideIndex = slides.length}
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";  
    }
    for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
    }
    slides[slideIndex-1].style.display = "block";  
    dots[slideIndex-1].className += " active";
  }
  </script>